<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BMI Calculator</title>
  <style>
    :root{
      --bg:#f3f6fb;
      --card:#ffffff;
      --accent:#5566ff;
      --muted:#6b7280;
      --success:#16a34a;
      --warning:#f59e0b;
      --danger:#ef4444;
      font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background:linear-gradient(180deg, #eef2ff 0%, var(--bg) 100%);
      padding:24px;
      color:#111827;
    }

    .card{
      width:100%;
      max-width:820px;
      background:var(--card);
      border-radius:14px;
      box-shadow:0 8px 30px rgba(17,24,39,0.08);
      padding:28px;
      display:grid;
      grid-template-columns:1fr 380px;
      gap:20px;
    }

    @media (max-width:880px){
      .card{grid-template-columns:1fr;}
    }

    h1{margin:0 0 6px 0;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    form{display:grid;gap:12px}
    .row{display:flex;gap:12px}
    .col{flex:1}

    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
    input[type="number"], select, input[type="text"]{
      width:100%;
      padding:10px 12px;
      border-radius:8px;
      border:1px solid rgba(15,23,42,0.06);
      background:#fff;
      font-size:15px;
    }

    .unit-toggle{display:flex;gap:8px;align-items:center}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:none;background:var(--accent);color:white;font-weight:600;cursor:pointer}
    .btn.secondary{background:transparent;color:var(--accent);border:1px solid rgba(85,102,255,0.12)}

    .result{
      border-radius:12px;padding:18px;background:linear-gradient(180deg,#fbfdff,#ffffff);
      box-shadow:inset 0 1px 0 rgba(255,255,255,0.6);
    }

    .bmi-value{font-size:36px;font-weight:700;margin:6px 0}
    .bmi-cat{font-size:15px;font-weight:600}

    .meter{
      height:12px;background:#eef2f5;border-radius:999px;margin-top:12px;position:relative;overflow:hidden
    }
    .meter > i{position:absolute;left:0;top:0;height:100%;border-radius:999px}

    .note{font-size:13px;color:var(--muted);margin-top:10px}

    .small{font-size:12px;color:var(--muted)}

    footer{margin-top:12px;font-size:12px;color:var(--muted)}

    .form-actions{display:flex;gap:10px;align-items:center;margin-top:6px}

    .gender-row{display:flex;gap:10px}
    .gender-row label{display:flex;gap:8px;align-items:center;padding:8px 10px;border:1px solid rgba(15,23,42,0.04);border-radius:8px;cursor:pointer}
    .gender-row input{appearance:none}

    .error{color:var(--danger);font-size:13px}
  </style>
</head>
<body>
  <main class="card" role="main">
    <section>
      <h1>BMI Calculator</h1>
      <p class="lead">Enter gender, age, weight and height — BMI will be calculated and categorized.</p>

      <form id="bmiForm" onsubmit="return false;" novalidate>
        <div>
          <label for="gender">Gender</label>
          <div class="gender-row" role="radiogroup" aria-label="Gender">
            <label><input type="radio" name="gender" value="male" checked> Male</label>
            <label><input type="radio" name="gender" value="female"> Female</label>
            <label><input type="radio" name="gender" value="other"> Other</label>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <label for="age">Age</label>
            <input id="age" type="number" min="1" max="150" placeholder="Years" />
          </div>
          <div class="col">
            <label for="weight">Weight</label>
            <div style="display:flex;gap:8px;align-items:center">
              <input id="weight" type="number" min="1" step="0.1" placeholder="kg" />
              <select id="weightUnit" aria-label="weight unit" style="width:90px;padding:10px;border-radius:8px">
                <option value="kg">kg</option>
                <option value="lb">lb</option>
              </select>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <label for="height">Height</label>
            <div style="display:flex;gap:8px;align-items:center">
              <input id="height" type="number" min="0.3" step="0.1" placeholder="cm or m" />
              <select id="heightUnit" style="width:90px;padding:10px;border-radius:8px">
                <option value="cm">cm</option>
                <option value="m">m</option>
              </select>
            </div>
          </div>
          <div class="col">
            <label>&nbsp;</label>
            <div class="form-actions">
              <button class="btn" id="calcBtn">Calculate BMI</button>
              <button class="btn secondary" id="resetBtn" type="button">Reset</button>
            </div>
          </div>
        </div>

        <div id="error" class="error" role="alert" aria-live="polite" style="display:none"></div>
      </form>

      <div class="note">BMI = weight (kg) / height (m)<sup>2</sup>. BMI is a simple screening tool — it doesn't directly measure body fat. For personalized advice consult a healthcare professional.</div>

      <footer>Built with ❤️ — enter realistic values (e.g., weight in kg, height in cm or m).</footer>
    </section>

    <aside>
      <div class="result" aria-live="polite">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div class="small">Result</div>
            <div class="bmi-value" id="bmiValue">--</div>
            <div class="bmi-cat" id="bmiCat">—</div>
          </div>
          <div style="text-align:right">
            <div class="small">Age</div>
            <div id="outAge">—</div>
            <div class="small" style="margin-top:8px">Gender</div>
            <div id="outGender">—</div>
          </div>
        </div>

        <div class="meter" aria-hidden="true">
          <i id="meterFill" style="width:0%"></i>
        </div>

        <div style="display:flex;justify-content:space-between;margin-top:10px;font-size:13px;color:var(--muted)">
          <div>Underweight</div>
          <div>Normal</div>
          <div>Overweight</div>
          <div>Obese</div>
        </div>

        <div class="note" id="advice">Enter your details and press Calculate.</div>
      </div>
    </aside>
  </main>

  <script>
    // Helper conversions
    function lbToKg(lb){return lb * 0.45359237}
    function cmToM(cm){return cm / 100}

    const calcBtn = document.getElementById('calcBtn')
    const resetBtn = document.getElementById('resetBtn')
    const bmiValue = document.getElementById('bmiValue')
    const bmiCat = document.getElementById('bmiCat')
    const meterFill = document.getElementById('meterFill')
    const outAge = document.getElementById('outAge')
    const outGender = document.getElementById('outGender')
    const advice = document.getElementById('advice')
    const errorEl = document.getElementById('error')

    function resetUI(){
      bmiValue.textContent='--'
      bmiCat.textContent='—'
      meterFill.style.width='0%'
      meterFill.style.background='transparent'
      outAge.textContent='—'
      outGender.textContent='—'
      advice.textContent='Enter your details and press Calculate.'
      errorEl.style.display='none'
      errorEl.textContent=''
    }

    resetBtn.addEventListener('click', ()=>{
      document.getElementById('bmiForm').reset()
      resetUI()
    })

    function getSelectedGender(){
      const g = document.querySelector('input[name="gender"]:checked')
      return g ? g.value : ''
    }

    function validate(age,weight,heightMeters){
      if(!age || age <= 0 || age > 150) return 'Please enter a valid age (1-150).'
      if(!weight || weight <= 0 || weight > 635) return 'Please enter a valid weight.' // 635kg is world record
      if(!heightMeters || heightMeters <= 0 || heightMeters > 2.7) return 'Please enter a valid height.' // 2.7m upper limit
      return ''
    }

    function bmiCategory(bmi){
      if(bmi < 18.5) return {label:'Underweight', color: 'var(--warning)'}
      if(bmi < 25) return {label:'Normal weight', color: 'var(--success)'}
      if(bmi < 30) return {label:'Overweight', color: 'var(--warning)'}
      return {label:'Obesity', color: 'var(--danger)'}
    }

    function mapMeterPercent(bmi){
      // Map BMI range 12 -> 40 to 0-100%
      const min=12, max=40
      const clamped = Math.max(min, Math.min(max, bmi))
      return ((clamped - min) / (max - min)) * 100
    }

    calcBtn.addEventListener('click', ()=>{
      const gender = getSelectedGender()
      const age = Number(document.getElementById('age').value || 0)
      let weight = Number(document.getElementById('weight').value || 0)
      const weightUnit = document.getElementById('weightUnit').value
      let height = Number(document.getElementById('height').value || 0)
      const heightUnit = document.getElementById('heightUnit').value

      // Convert units
      if(weightUnit === 'lb') weight = lbToKg(weight)
      if(heightUnit === 'cm') height = cmToM(height)

      // Validate
      const err = validate(age, weight, height)
      if(err){
        errorEl.style.display='block'
        errorEl.textContent = err
        return
      }

      errorEl.style.display='none'

      const bmi = weight / (height * height)
      const bmiRounded = Math.round(bmi * 100) / 100
      const cat = bmiCategory(bmi)

      // Update UI
      bmiValue.textContent = bmiRounded.toFixed(2)
      bmiCat.textContent = cat.label
      bmiCat.style.color = cat.color
      meterFill.style.width = mapMeterPercent(bmi) + '%'
      meterFill.style.background = cat.color

      outAge.textContent = age + ' yrs'
      outGender.textContent = gender.charAt(0).toUpperCase() + gender.slice(1)

      // Advice
      let adviceText = ''
      if(cat.label === 'Underweight') adviceText = 'You are underweight. Consider a balanced, calorie-dense diet and check with a healthcare provider.'
      else if(cat.label === 'Normal weight') adviceText = 'Great — your BMI is within the normal range. Keep up a balanced diet and regular activity.'
      else if(cat.label === 'Overweight') adviceText = 'Your BMI is above the normal range. Consider reviewing diet, activity levels, and consult a health professional if concerned.'
      else adviceText = 'BMI falls in the obesity range. It is recommended to seek personalized advice from a healthcare professional.'

      advice.textContent = adviceText

      // For accessibility: focus result
      bmiValue.focus && bmiValue.focus()
    })

    // Real-time calculate when pressing Enter in any input
    ['age','weight','height'].forEach(id=>{
      document.getElementById(id).addEventListener('keydown', (e)=>{
        if(e.key === 'Enter'){
          e.preventDefault(); calcBtn.click()
        }
      })
    })

    // Initialize
    resetUI()
  </script>
</body>
</html>
